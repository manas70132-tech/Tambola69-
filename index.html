<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tambola 69</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: #000; color: #fff; text-align: center;
      min-height: 100vh;
    }
    /* PRELOADER */
    #preloader {
      position: fixed; inset: 0;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      z-index: 9999; gap: 18px;
      background: #000;
    }
    .balls { position: absolute; top: 18%; display:flex; gap:14px; justify-content:center; width:100%; }
    .ball {
      width:64px; height:64px; border-radius:50%;
      background: radial-gradient(circle at 30% 25%, #fff3c4, #ffcc00 40%, #ff7700 100%);
      display:flex; align-items:center; justify-content:center;
      font-weight:800; color:#000; font-size:20px;
      animation: bob 1800ms infinite ease-in-out;
    }
    .ball:nth-child(2){ animation-delay: 0.25s;}
    .ball:nth-child(3){ animation-delay: 0.5s;}
    .ball:nth-child(4){ animation-delay: 0.75s;}
    .ball:nth-child(5){ animation-delay: 1s;}
    @keyframes bob { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-22px);} }

    .logo { font-size:64px; font-weight:900; letter-spacing:2px; color:#ffdd55;
      animation: glow 1800ms infinite alternate; }
    .logo span { color:#ff6600; }
    @keyframes glow { from { text-shadow:0 0 8px #ffcc00;} to { text-shadow:0 0 36px #ff6600;} }

    .anim-text { font-size:20px; animation: fade 2s infinite alternate; }
    @keyframes fade { from {opacity:0.4} to {opacity:1} }

    .welcome-line { font-size:20px; color:#ffd96b; font-weight:700; animation: hop 1700ms infinite; }
    @keyframes hop { 0%,100%{ transform:translateY(0);} 50%{ transform:translateY(-8px);} }

    /* Login */
    #loginForm { display:none; padding:20px; margin-top:12vh; }
    form {
      width:300px; margin:auto; padding:20px;
      background:#111; border-radius:12px; box-shadow:0 0 12px #ffcc00;
    }
    input { width:100%; margin:8px 0; padding:10px; border:none; border-radius:6px; background:#222; color:#fff; }
    button { margin-top:10px; width:100%; padding:12px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; }
    .primary { background:linear-gradient(90deg,#ffcc00,#ff9900); color:#111; }
    .secondary { background:transparent; border:1px solid #ffcc00; color:#ffcc00; }
  </style>
</head>
<body>

  <!-- PRELOADER -->
  <div id="preloader">
    <audio id="preloaderSound" autoplay>
      <!-- üëâ ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä Indian Theme MP3 link ‡§°‡§æ‡§≤‡•á‡§Ç -->
      <source src="YOUR_THEME_SOUND.mp3" type="audio/mpeg">
    </audio>

    <div class="balls">
      <div class="ball">6</div>
      <div class="ball">9</div>
      <div class="ball">3</div>
      <div class="ball">7</div>
      <div class="ball">2</div>
    </div>

    <div class="logo">Tambola <span>69</span></div>
    <div class="anim-text">‚ú® Welcome to Tambola 69 ‚ú®</div>
    <div class="welcome-line">"Apna Game, Apni Masti!"</div>
  </div>

  <!-- LOGIN FORM -->
  <div id="loginForm">
    <form onsubmit="return false;">
      <h2>Login with OTP</h2>
      <input id="name" type="text" placeholder="Full Name" required>
      <input id="email" type="email" placeholder="Email" required>
      <input id="phone" type="tel" placeholder="+91XXXXXXXXXX" required>
      <div id="recaptcha-container"></div>

      <button class="primary" type="button" onclick="sendOTP()">Send OTP</button>
      <input id="otpInput" type="number" placeholder="Enter OTP" style="display:none;">
      <button class="secondary" type="button" id="verifyBtn" style="display:none;" onclick="verifyOTP()">Verify OTP</button>
    </form>
  </div>

  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <script>
    // Firebase Config
    const firebaseConfig = {
      "AIzaSyAphHTM4faH7_FVXdnootp4NipZd3vtEck",
      authDomain: "tambola69-9dc8f.firebaseapp.com",
      projectId: "tambola69-9dc8f",
      storageBucket: "tambola69-9dc8f.firebasestorage.app",
      messagingSenderId: "413290158586",
      appId: "1:413290158586:web:70fff2d94b29206487ec43",
      measurementId: "G-6WJNDX5DGB"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    // Hide preloader after 3 sec
    setTimeout(() => {
      document.getElementById("preloader").style.display = "none";
      document.getElementById("loginForm").style.display = "block";
      // stop sound
      const sound = document.getElementById("preloaderSound");
      if(sound){ sound.pause(); sound.currentTime=0; }
    }, 3000);

    // Send OTP
    function sendOTP() {
      const phone = document.getElementById("phone").value;
      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {size: 'invisible'});
      auth.signInWithPhoneNumber(phone, window.recaptchaVerifier)
        .then(confirmationResult => {
          window.confirmationResult = confirmationResult;
          alert("OTP Sent!");
          document.getElementById("otpInput").style.display = "block";
          document.getElementById("verifyBtn").style.display = "block";
        }).catch(err => alert("Error: " + err.message));
    }

    // Verify OTP
    function verifyOTP() {
      const otp = document.getElementById("otpInput").value;
      window.confirmationResult.confirm(otp).then(result => {
        const user = result.user;
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const phone = document.getElementById("phone").value;

        db.ref("users/" + user.uid).set({
          name, email, phone, uid: user.uid,
          loginTime: new Date().toISOString()
        });
        alert("‚úÖ Login Successful! Redirecting...");
        window.location.href = "main.html";
      }).catch(err => alert("‚ùå Invalid OTP: " + err.message));
    }
  </script>
</body>
</html>
