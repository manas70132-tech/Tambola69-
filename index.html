<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tambola 69</title>
<style>
  body { margin:0; padding:0; font-family:"Segoe UI", Roboto, Arial, sans-serif; min-height:100vh; overflow:hidden; }
  body { background: linear-gradient(270deg, #ffcc00, #ff6600, #ffcc00, #ff7700); background-size: 800% 800%; animation: gradientMove 15s ease infinite; display:flex; justify-content:center; align-items:center; color:#fff; text-align:center; }
  @keyframes gradientMove { 0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; } }

  /* PRELOADER */
  #preloader { display:flex; flex-direction:column; justify-content:center; align-items:center; gap:20px; }
  .balls { display:flex; gap:16px; justify-content:center; }
  .ball { width:60px; height:60px; border-radius:50%; background: radial-gradient(circle at 30% 25%, #fff3c4, #ffcc00 40%, #ff7700 100%); display:flex; align-items:center; justify-content:center; font-weight:900; font-size:20px; color:#000; animation: bounce 2s infinite ease-in-out; }
  .ball:nth-child(2){ animation-delay:0.3s;} .ball:nth-child(3){ animation-delay:0.6s;} .ball:nth-child(4){ animation-delay:0.9s;} .ball:nth-child(5){ animation-delay:1.2s;}
  @keyframes bounce { 0%,100%{ transform:translateY(0);} 50%{ transform:translateY(-25px);} }
  .logo { font-size:72px; font-weight:900; letter-spacing:2px; color:#ffdd55; text-shadow: 0 0 10px #ffcc00,0 0 30px #ff6600; animation: glow 2s infinite alternate; }
  .logo span { color:#ff6600; }
  @keyframes glow { 0%{ text-shadow:0 0 10px #ffcc00,0 0 20px #ff6600; } 50%{ text-shadow:0 0 20px #fff3c4,0 0 40px #ff9900; } 100%{ text-shadow:0 0 30px #ffcc00,0 0 60px #ff7700; } }
  .welcome-text { font-size:22px; color:#ffd96b; font-weight:700; animation: hop 1.7s infinite; }
  @keyframes hop { 0%,100%{ transform:translateY(0);} 50%{ transform:translateY(-10px);} }

  /* LOGIN FORM */
  #loginForm { display:none; padding:20px; margin-top:12vh; }
  form { width:320px; margin:auto; padding:20px; background:rgba(0,0,0,0.8); border-radius:15px; box-shadow:0 0 20px #ffcc00; display:flex; flex-direction:column; gap:15px; }
  button { padding:12px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:10px; font-size:16px; }
  .google { background:#4285F4; color:#fff; }
  .facebook { background:#3b5998; color:#fff; }
  .google img, .facebook img { width:24px; height:24px; }
  #loader { display:none; margin:10px auto; border:4px solid #f3f3f3; border-top:4px solid #fff; border-radius:50%; width:40px; height:40px; animation: spin 1s linear infinite; }
  @keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
</style>
</head>
<body>

<!-- PRELOADER -->
<div id="preloader">
  <div class="balls">
    <div class="ball">6</div>
    <div class="ball">9</div>
    <div class="ball">3</div>
    <div class="ball">7</div>
    <div class="ball">2</div>
  </div>
  <div class="logo">Tambola <span>69</span></div>
  <div class="welcome-text">✨ Welcome to Tambola 69 ✨</div>
  <div class="welcome-text">"Apna Game, Apni Masti!"</div>
</div>

<!-- LOGIN FORM -->
<div id="loginForm">
  <form onsubmit="return false;">
    <h2>Login</h2>
    <button class="google" onclick="loginGoogle()">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="Google"> Sign in with Google
    </button>
    <button class="facebook" onclick="loginFacebook()">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png" alt="Facebook"> Sign in with Facebook
    </button>
    <div id="loader"></div>
  </form>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAphHTM4faH7_FVXdnootp4NipZd3vtEck",
  authDomain: "tambola69-9dc8f.firebaseapp.com",
  projectId: "tambola69-9dc8f",
  storageBucket: "tambola69-9dc8f.firebasestorage.app",
  messagingSenderId: "413290158586",
  appId: "1:413290158586:web:70fff2d94b29206487ec43",
  measurementId: "G-6WJNDX5DGB"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// Preloader -> Login Form
window.addEventListener('load',()=>{
  setTimeout(()=>{
    document.getElementById("preloader").style.display="none";
    document.getElementById("loginForm").style.display="block";
  },2500);
});

// Google Login
function loginGoogle(){
  const provider = new firebase.auth.GoogleAuthProvider();
  document.getElementById("loader").style.display="block";
  auth.signInWithPopup(provider)
    .then(result=>{
      document.getElementById("loader").style.display="none";
      const user = result.user;
      db.ref("users/"+user.uid).set({name:user.displayName,email:user.email,uid:user.uid,loginTime:new Date().toISOString()});
      alert("✅ Login Successful! Welcome "+user.displayName);
      window.location.href="main.html";
    })
    .catch(err=>{
      document.getElementById("loader").style.display="none";
      alert("❌ Login Failed: "+err.message);
    });
}

// Facebook Login
function loginFacebook(){
  const provider = new firebase.auth.FacebookAuthProvider();
  document.getElementById("loader").style.display="block";
  auth.signInWithPopup(provider)
    .then(result=>{
      document.getElementById("loader").style.display="none";
      const user = result.user;
      db.ref("users/"+user.uid).set({name:user.displayName,email:user.email,uid:user.uid,loginTime:new Date().toISOString()});
      alert("✅ Login Successful! Welcome "+user.displayName);
      window.location.href="main.html";
    })
    .catch(err=>{
      document.getElementById("loader").style.display="none";
      alert("❌ Login Failed: "+err.message);
    });
}
</script>
</body>
</html>
