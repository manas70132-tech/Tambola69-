<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tambola 69 - User</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2196f3"/>

  <link rel="stylesheet" href="style.css">
</head>
<body>
<button id="musicBtn" type="button" style="position:fixed; top:12px; left:12px; font-size:22px; z-index:10000; background:#fff; color:#111; border:2px solid #111; border-radius:10px; padding:6px 10px; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15);" aria-pressed="false">ğŸµ</button>
<audio id="liveMusic" loop playsinline></audio>

<header>Tambola 69</header>
<h2>Step Into The Excitement!</h2>
<h4>â€œWe hope luck is always on your side!â€ ğŸ‰</h4>

<!-- MENU -->
<div class="menu">
  <div class="hamburger" id="menuToggle" aria-label="Open menu" role="button" tabindex="0"><span></span><span></span><span></span></div>
</div>
<div class="menu-panel" id="menuPanel">
  <h4>Options</h4>
  <div class="menu-row">
    <strong>ğŸ† Your Winnings: â‚¹<span id="myWinnings">0</span></strong>
    <div class="menu-note">If you haven't won yet, this shows â‚¹0.</div>
  </div>
  <div class="menu-row">
    <strong>ğŸ’¸ Cash Withdrawal</strong>
    <div class="menu-actions">
      <button class="menu-btn" type="button" id="withdrawBtn">Withdraw Now</button>
      <button class="menu-btn secondary" type="button" id="sendUPIBtn">Send UPI/Phone</button>
    </div>
  </div>
  <div class="menu-row">
    <strong>ğŸ“£ Share App</strong>
    <div class="menu-actions">
      <button class="menu-btn" type="button" id="shareNative">Share</button>
      <button class="menu-btn secondary" type="button" id="shareWhatsApp">WhatsApp</button>
      <button class="menu-btn secondary" type="button" id="shareFacebook">Facebook</button>
      <button class="menu-btn secondary" type="button" id="shareInstagram">Instagram</button>
    </div>
  </div>
  <div class="menu-row">
    <strong>ğŸ‘¤ User Profile</strong>
    <div class="menu-actions">
      <button class="menu-btn" type="button" id="viewProfileBtn">View Profile</button>
    </div>
  </div>
  <div class="menu-row">
    <strong>âš™ï¸ Auto Options</strong>
    <div class="menu-actions">
      <label><input type="checkbox" id="autoTickToggle" /> Auto-Tick</label>
      <label><input type="checkbox" id="autoClaimToggle" /> Auto-Claim</label>
    </div>
  </div>
  <div class="menu-row">
    <strong>ğŸ“œ My History</strong>
    <div class="menu-actions">
      <button class="menu-btn" type="button" id="viewHistoryBtn">Game & Payment</button>
    </div>
  </div>
  <div class="menu-row">
    <strong>â„¹ï¸ Information</strong>
    <div class="menu-actions">
      <button class="menu-btn" type="button" onclick="showStaticPage('about')">About Us</button>
      <button class="menu-btn secondary" type="button" onclick="showStaticPage('terms')">Terms & Conditions</button>
      <button class="menu-btn secondary" type="button" onclick="showStaticPage('privacy')">Privacy Policy</button>
    </div>
  </div>
</div>

<!-- PRIZE BOX -->
<div class="prize-box">
  <h2> Mega contest </h2>
  <span>* Early Five Prize: â‚¹ 500</span><br>
  <span>* Ticket Corner Prize: â‚¹ 500</span><br>
  <span>* Each Line Prize: â‚¹ 500</span><br>
  <span>* Full House Prize: â‚¹ 3000</span><br>
  <span># 2nd Full House Prize â‚¹ 1000</span>
</div>

<!-- LIVE VIDEO -->
<div class="claimed-box" id="watchLiveBox">
  <h3>ğŸ¥ Watch Live Video</h3>
  <div>
    <button id="watchLiveBtn" type="button">â–¶ï¸ Watch Live</button>
    <div id="liveVideoBox" style="margin-top:15px; display:none;">
      <iframe id="liveFrame" width="100%" height="300" src="" title="Tambola 69 Live" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
  </div>
</div>

<!-- GAME INFO -->
<div class="waiting-wrapper">
  <div class="waiting-box" id="waitingBox">
    <div id="waitingTitle">Waiting for Draw...</div>
    <div id="waitingDesc">No active room â€¢ Global draw idle</div>
    <div id="latestNumber">â€”</div>
    <div id="waitingLive"><span id="waitingLiveText">Live Users: 0</span></div>
  </div>
</div>

<!-- NEXT GAME -->
<div class="next-game-box" id="nextGameBoxTop">
  <h3>Game Starts In â³</h3>
  <div class="next-game-info">
    <div><span id="nextCountdownTop">00:00:00</span><br>Timer</div>
    <div><span id="ticketsLeftTop">0</span><br>Tickets Left</div>
    <div><span id="prizePercentageTop">0%</span><br>Prize %</div>
    <div><span id="TotalSpotTop">100</span><br>Total Spot</div>
  </div>
  <button class="book-ticket" type="button" id="buyTicketBtnTop">Buy â‚¹ 100 ğŸ’³</button>
</div>

<!-- USER TICKET -->
<div class="user-ticket" id="userTicketContainer">
  <div class="ticket-shell">
    <div id="ticketSerial">#000</div>
    <div id="ticket"></div>
    <div id="gameOverMessage" style="display:none;">GAME OVER</div>
  </div>
  <button id="viewTicketsBtn" type="button">View all my tickets</button>
</div>

<!-- CLAIM -->
<div class="claimed-box" id="claimBox">
  <h3>Claim Your Prize ğŸ</h3>
  <div id="claimButtonsContainer">
    <button class="claim-button" type="button" data-prize="Early Five">Early Five â‚¹500</button>
    <button class="claim-button" type="button" data-prize="Top Line">Top Line â‚¹500</button>
    <button class="claim-button" type="button" data-prize="Middle Line">Middle Line â‚¹500</button>
    <button class="claim-button" type="button" data-prize="Bottom Line">Bottom Line â‚¹500</button>
    <button class="claim-button" type="button" data-prize="Ticket Corner">Ticket Corner â‚¹500</button>
    <button class="claim-button" type="button" data-prize="Full House">Full House â‚¹3000</button>
    <button class="claim-button" type="button" data-prize="2nd Full House">2nd Full House â‚¹1000</button>
  </div>
</div>

<!-- TAMBOLA BOARD -->
<div class="tambola-board-container">
  <h3>Tambola Board</h3>
  <div class="tambola-board-grid" id="tambola-board"></div>
</div>

<!-- NEXT GAME BOTTOM -->
<div class="next-game-box" id="nextGameBoxBottom">
  <h3>Next Game Starts In â³</h3>
  <div class="next-game-info">
    <div><span id="nextCountdownBottom">00:00:00</span><br>Timer</div>
    <div><span id="ticketsLeftBottom">0</span><br>Tickets Left</div>
    <div><span id="prizePercentageBottom">0%</span><br>Prize %</div>
    <div><span id="TotalSpotBottom">100</span><br>Total Spot</div>
  </div>
  <button class="book-ticket" type="button" id="buyTicketBtnBottom">Buy â‚¹ 100 ğŸ’³</button>
</div>

<!-- PLAY WITH FRIENDS -->
<div class="play-friends-box" id="playFriendsBox">
  <h3>Play With Friends ğŸ® <span id="roomStatusPill">No Room</span></h3>
  <div>
    <span id="friendsPrizePercentage">Prize %: 90</span>
    <span id="friendsPartyAmount">Party Amount: â‚¹0</span>
  </div>
  <input type="text" id="joinRoomIdInput" placeholder="Enter Room ID" />
  <button id="createRoomBtn" type="button">Create Room</button>
  <button id="joinRoomBtn" type="button">Join Room</button>
</div>

<!-- WINNERS -->
<div class="winners-box" id="winnersBox">
  <h3>Top Winners ğŸ†</h3>
  <div id="winnerList">Loading winners...</div>
  <button type="button" onclick="showAllWinners()">View All Winners</button>
</div>

<!-- MODALS (profile, withdraw, etc) -->
<!-- Keep your original modal HTML here (unchanged except type="button" fixes) -->

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<script>
  // FIREBASE CONFIG (replace with your own project details)
  var firebaseConfig = {
    apiKey: "AIzaSyAphHTM4faH7_FVXdnootp4NipZd3vtEck",
  authDomain: "tambola69-9dc8f.firebaseapp.com",
  databaseURL: "https://tambola69-9dc8f-default-rtdb.firebaseio.com",
  projectId: "tambola69-9dc8f",
  storageBucket: "tambola69-9dc8f.firebasestorage.app",
  messagingSenderId: "413290158586",
  appId: "1:413290158586:web:c4c6d6d224c96a7487ec43",
  measurementId: "G-TM68JPXH18"
  };
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }

  // SERVICE WORKER
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
      .then(() => console.log('Service Worker Registered'))
      .catch(err => console.log('Service Worker registration failed:', err));
  }

  // MUSIC BTN
  const musicBtn = document.getElementById('musicBtn');
  const audio = document.getElementById('liveMusic');
  audio.src = '/assets/music.mp3'; // replace with actual mp3
  musicBtn.addEventListener('click', () => {
    if (audio.paused) {
      audio.play().catch(e => console.log('Audio play blocked', e));
      musicBtn.setAttribute('aria-pressed','true');
    } else {
      audio.pause();
      musicBtn.setAttribute('aria-pressed','false');
    }
  });

  // LIVE BTN
  document.getElementById('watchLiveBtn').addEventListener('click', () => {
    document.getElementById('liveFrame').src = "https://www.youtube.com/embed/your_live_id";
    document.getElementById('liveVideoBox').style.display = 'block';
  });
</script>
<script src="script.js" defer></script>
</body>
</html>
