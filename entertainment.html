<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Tambola 69 - User</title>
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2196f3">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111111"/>
<link rel="stylesheet" href="style.css"> <script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js')
    .then(() => console.log('Service Worker Registered'))
    .catch(error => console.log('Service Worker registration failed:', error));
}
</script>
</head>
<body>

<div class="animation-container" id="animationContainer">
    <div class="animation-ticket" id="animationTicket">
        <div class="animation-header">Welcome to Tambola</div>
        <div class="spinner-container">
            <div class="spinner"></div>
            <div class="spinner-number">0</div>
        </div>
        <div class="final-number-spot">
            <div class="final-number">69</div>
        </div>
        <div class="footer">Thank you for participating!</div>
    </div>
    <div class="animation-login-box" id="animationLoginBox">
        <h2>Login to Continue</h2>
        <button class="animation-login-button google-btn">
            <img src="https://img.icons8.com/color/48/000000/google-logo.png" alt="Google">
            Sign in with Google
        </button>
        <button class="animation-login-button facebook-btn">
            <img src="https://img.icons8.com/color/48/000000/facebook-new.png" alt="Facebook">
            Sign in with Facebook
        </button>
    </div>
</div>

<div class="main-game-container" id="mainGameContainer">
<button id="musicBtn" style="position:fixed; top:12px; left:12px; font-size:22px; z-index:10000; background:#fff; color:#111; border:2px solid #111; border-radius:10px; padding:6px 10px; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.15);">üéµ</button>
<audio id="liveMusic" autoplay loop></audio>

<header>Tambola 69</header>
<h2>Step Into The Excitement!</h2>
<h4>‚ÄúWe hope luck is always on your side!‚Äù üéâ</h4>

<div class="menu">
  <div class="hamburger" id="menuToggle" aria-label="Options"><span></span><span></span><span></span></div>
</div>
<div class="menu-panel" id="menuPanel">
  <h4>Options</h4>
  <div class="menu-row">
    <strong>üèÜ Your Winnings: ‚Çπ<span id="myWinnings">0</span></strong>
    <div class="menu-note">If you haven't won yet, this shows ‚Çπ0.</div>
  </div>
  <div class="menu-row">
    <strong>üí∏ Cash Withdrawal</strong>
    <div class="menu-actions">
      <button class="menu-btn" id="withdrawBtn">Withdraw Now</button>
      <button class="menu-btn secondary" id="sendUPIBtn">Send UPI/Phone</button>
    </div>
    <div class="menu-note">Enter amount and your UPI or phone. We‚Äôll receive your request instantly.</div>
  </div>
  <div class="menu-row">
    <strong>üì£ Share App</strong>
    <div class="menu-actions">
      <button class="menu-btn" id="shareNative">Share</button>
      <button class="menu-btn secondary" id="shareWhatsApp">WhatsApp</button>
      <button class="menu-btn secondary" id="shareFacebook">Facebook</button>
      <button class="menu-btn secondary" id="shareInstagram">Instagram</button>
    </div>
    <div class="menu-note">Invite friends via your favourite app.</div>
  </div>
  <div class="menu-row">
    <strong>üë§ User Profile</strong>
    <div class="menu-actions">
      <button class="menu-btn" id="viewProfileBtn">View Profile</button>
    </div>
    <div class="menu-note">See your User ID, Name, Contact & Email.</div>
  </div>
  <div class="menu-row">
    <strong>‚öôÔ∏è Auto Options</strong>
    <div class="menu-actions">
      <label style="display:flex;align-items:center;gap:8px;">
        <input type="checkbox" id="autoTickToggle" /> Auto-Tick
      </label>
      <label style="display:flex;align-items:center;gap:8px;">
        <input type="checkbox" id="autoClaimToggle" /> Auto-Claim
      </label>
    </div>
    <div class="menu-note">Auto-Tick marks numbers on your ticket as they are drawn. Auto-Claim will submit valid claims automatically.</div>
  </div>
  <div class="menu-row">
    <strong>üìú My History</strong>
    <div class="menu-actions">
      <button class="menu-btn" id="viewHistoryBtn">Game & Payment</button>
    </div>
    <div class="menu-note">View your past game and withdrawal history.</div>
  </div>
  <div class="menu-row">
    <strong>‚ÑπÔ∏è Information</strong>
    <div class="menu-actions">
        <button class="menu-btn" onclick="showStaticPage('about')">About Us</button>
        <button class="menu-btn secondary" onclick="showStaticPage('terms')">Terms & Conditions</button>
        <button class="menu-btn secondary" onclick="showStaticPage('privacy')">Privacy Policy</button>
    </div>
    <div class="menu-note">Read about the app, its terms, and privacy policies.</div>
  </div>
  </div>

<div class="prize-box">
  <h2> Mega contest </h2>
  <span>Prize list :-</span>
  <span>* Early Five Prize: ‚Çπ 500</span>
  <span>* Ticket Corner Prize: ‚Çπ 500</span>
  <span>* Each Line Prize: ‚Çπ 500</span>
  <span>* Full House Prize: ‚Çπ 3000</span>
  <span># 2nd Full House Prize ‚Çπ 1000</span>
  <span># Try Your Luck !</span>
</div>

<div class="claimed-box" id="watchLiveBox" style="max-width:600px;margin:10px auto;padding:12px;border-radius:12px;color:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.1); background: #222;">
  <h3 style="margin-bottom:8px;">üé• Watch Live Video (Team Video)</h3>
  <div style="text-align:center;">
    <button id="watchLiveBtn" style="padding:10px 20px; font-size:16px; background:#ff4444; color:#fff; border:none; border-radius:8px; cursor:pointer;">
      ‚ñ∂Ô∏è Watch Live
    </button>
    <div id="liveVideoBox" style="margin-top:15px; display:none;">
      <iframe id="liveFrame" width="100%" height="300" src="" title="Tambola 69 Live" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
  <div style="margin-top:8px; font-size:12px; opacity:0.9;">Tip: Tap "Watch Live" to start the stream inside the app. (Video Classification: Live Draw)</div>
</div>

<div class="waiting-wrapper">
  <div class="waiting-box" id="waitingBox">
    <div class="waiting-title" id="waitingTitle">Waiting for Draw...</div>
    <div class="waiting-desc" id="waitingDesc">No active room ‚Ä¢ Global draw idle</div>
    <div class="waiting-latest" id="latestNumber">‚Äî</div>
    <div class="waiting-live-pill" id="waitingLive">
      <div class="dot" id="liveDot"></div>
      <div id="waitingLiveText">Live Users: 0</div>
    </div>
  </div>
</div>

<div class="next-game-box" id="nextGameBoxTop">
  <h3>Game Starts In ‚è≥</h3>
  <div class="next-game-info">
    <div><span id="nextCountdownTop">00:00:00</span><br>Timer</div>
    <div><span id="ticketsLeftTop">0</span><br>Tickets Left</div>
    <div><span id="prizePercentageTop">0%</span><br>Prize %</div>
    <div><span id="TotalSpotTop">100</span><br>Total Spot</div>
  </div>
  <button class="book-ticket" id="buyTicketBtnTop">Buy ‚Çπ 100 üí≥</button>
</div>

<div class="user-ticket" id="userTicketContainer">
  <div class="ticket-shell" id="ticketShell">
    <div id="ticketSerial" class="ticket-serial">#000</div>
    <div id="ticket" class="ticket"></div>
    <div id="gameOverMessage" class="game-over-message" style="display:none;">GAME OVER</div>
  </div>
  <div class="row" style="margin-top: 15px;">
    <button id="viewTicketsBtn" class="view-all-button" style="display: block;">View my all ticket</button>
  </div>
</div>
<div class="game-details-box" id="userGamesContainer">
  <h3>My Booked Tickets</h3>
  <div id="userGamesList" class="game-info-grid" style="display:none; margin-top: 15px;">
    No booked tickets yet.
  </div>
</div>
<div class="claimed-box" id="claimBox">
  <h3>Claim Your Prize üéÅ</h3>
  <div class="claim-buttons" id="claimButtonsContainer">
    <button class="claim-button" data-prize="Early Five">Early Five ‚Çπ500</button>
    <button class="claim-button" data-prize="Top Line">Top Line ‚Çπ500</button>
    <button class="claim-button" data-prize="Middle Line">Middle Line ‚Çπ500</button>
    <button class="claim-button" data-prize="Bottom Line">Bottom Line ‚Çπ500</button>
    <button class="claim-button" data-prize="Ticket Corner">Ticket Corner ‚Çπ500</button>
    <button class="claim-button" data-prize="Full House">Full House ‚Çπ3000</button>
    <button class="claim-button" data-prize="2nd Full House">2nd Full House ‚Çπ1000</button>
  </div>
</div>
<div class="tambola-board-container">
  <h3>Tambola Board</h3>
  <div class="tambola-board-grid" id="tambola-board"></div>
</div>

<div class="history-box" id="historyBox">
  <h3>Drawn Numbers History</h3>
  <div id="history">None</div>
</div>

<div class="next-game-box" id="nextGameBoxBottom">
  <h3>Next Game Starts In ‚è≥</h3>
  <div class="next-game-info">
    <div><span id="nextCountdownBottom">00:00:00</span><br>Timer</div>
    <div><span id="ticketsLeftBottom">0</span><br>Tickets Left</div>
    <div><span id="prizePercentageBottom">0%</span><br>Prize %</div>
    <div><span id="TotalSpotBottum">100</span><br>Total Spot</div>
  </div>
  <button class="book-ticket" id="buyTicketBtnBottom">Buy ‚Çπ 100 üí≥</button>
</div>

<div class="play-friends-box" id="playFriendsBox">
  <h3>Play With Friends üéÆ <span class="pill" id="roomStatusPill">No Room</span></h3>
  <div class="friends-info">
    <span id="friendsPrizePercentage">Prize %: 90</span>
    <span id="friendsPartyAmount" style="font-weight:900;">Party Amount: ‚Çπ0</span>
  </div>
  <div class="row" style="margin-top:8px;">
    <button class="book-ticket" id="createRoomBtn">Create Room</button>
    <button class="join-game-button" id="joinRoomBtn">Join Room</button>
    <input type="text" id="joinRoomIdInput" placeholder="Enter Room ID" />
  </div>
  <div id="roomInfo" style="margin-top:10px;color:#fff;"></div>
  <div class="row" style="margin-top:10px;">
    <button class="book-ticket" id="roomBuyTicketBtn" style="display:none;">Buy Ticket</button>
    <button class="join-game-button" id="startRoomGameBtn" style="display:none;" disabled>Start Game</button>
  </div>
  <div id="playersList" class="muted" style="margin-top:10px;"></div>
</div>

<div class="winners-box" id="winnersBox">
  <h3>Top Winners üèÜ</h3>
  <div id="winnerList">Loading winners...</div>
  <button class="view-all-button" onclick="showAllWinners()">View All Winners</button>
</div>


</div>
<div class="modal-backdrop" id="withdrawModal" style="display:none;">
  <div class="modal">
    <h3>Request Withdrawal</h3>
    <label>Amount (‚Çπ)</label>
    <input id="withdrawAmount" type="number" placeholder="Enter amount" />
    <label>UPI ID or Phone</label>
    <input id="withdrawDest" type="text" placeholder="example@upi or +91XXXXXXXXXX" />
    <div class="row" style="justify-content:flex-end;">
      <button class="btn secondary" id="cancelWithdrawBtn">Cancel</button>
      <button class="btn" id="submitWithdrawBtn">Submit Request</button>
    </div>
    <div class="note">Withdrawal requests will be recorded and admin will be notified (email/SMS) via your server/cloud-function.</div>
  </div>
</div>

<div class="modal-backdrop" id="loginModal">
  <div class="modal">
    <h3>Login with Phone OTP</h3>
    <label>Phone Number (include +91)</label>
    <input id="phoneInput" type="tel" placeholder="+91XXXXXXXXXX" />
    <div id="recaptcha-container" style="margin-top:10px;"></div>
    <div class="row">
      <button class="btn" id="sendOtpBtn">Send OTP</button>
      <button class="btn secondary" id="closeLoginBtn" type="button">Close</button>
    </div>
    <label>Enter OTP</label>
    <input id="otpInput" type="text" placeholder="6-digit code" />
    <button class="btn" id="verifyOtpBtn" style="margin-top:8px;">Verify OTP</button>
    <div id="detailsStep" style="display:none; margin-top:10px;">
      <h3 style="margin-top:12px;">Your Details</h3>
      <label>Name</label>
      <input id="nameInput" type="text" placeholder="Your name" />
      <label>Email</label>
      <input id="emailInput" type="email" placeholder="you@example.com" />
      <button class="btn" id="saveDetailsBtn" style="margin-top:8px;">Save</button>
    </div>
    <div class="note">Note: OTP works on HTTPS or localhost.</div>
  </div>
</div>

<div class="modal-backdrop" id="profileModal" style="display:none;">
    <div class="modal">
        <div id="profileForm" style="display:block;">
            <h3>Create/Update Profile</h3>
            <label>Upload Profile Image (Optional)</label>
            <input type="file" id="profileImageUpload" accept="image/*" style="margin-bottom:10px;"/>
            <label>Name</label>
            <input id="profileNameInput" type="text" placeholder="Your name" />
            <label>Phone Number</label>
            <input id="profileContactInput" type="tel" placeholder="+91XXXXXXXXXX" />
            <label>Email</label>
            <input id="profileEmailInput" type="email" placeholder="you@example.com" />
            <div class="row" style="justify-content:flex-end;">
                <button class="btn secondary" id="closeProfileBtn">Cancel</button>
                <button class="btn" id="saveProfileBtn">Save Profile</button>
            </div>
        </div>
        <div id="profileView" style="display:none;">
            <h3>Your Profile</h3>
            <div style="text-align:center; margin-bottom:12px;">
                <img id="profileImagePreview" src="https://via.placeholder.com/100" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:2px solid #ccc;">
            </div>
            <p><strong>Name:</strong> <span id="viewName"></span></p>
            <p><strong>Phone:</strong> <span id="viewPhone"></span></p>
            <p><strong>Email:</strong> <span id="viewEmail"></span></p>
            <div class="row" style="justify-content:flex-end;">
                <button class="btn secondary" id="closeViewProfileBtn">Close</button>
                <button class="btn" id="editProfileBtn">Edit</button>
            </div>
        </div>
    </div>
</div>

<div class="modal-backdrop" id="staticPageModal" style="display:none;">
  <div class="modal">
    <div class="row" style="justify-content:space-between; align-items:center;">
      <h3 id="staticPageTitle"></h3>
      <button class="btn secondary" onclick="document.getElementById('staticPageModal').style.display='none';">Close</button>
    </div>
    <div id="staticPageContent" style="margin-top:12px; font-size:14px; color:#444;"></div>
  </div>
</div>

<div class="modal-backdrop" id="winnerProfileModal" style="display:none;">
  <div class="modal">
    <div class="row" style="justify-content:space-between; align-items:center;">
      <h3 id="winnerProfileTitle">Winner's Profile</h3>
      <button class="btn secondary" onclick="document.getElementById('winnerProfileModal').style.display='none';">Close</button>
    </div>
    <div style="text-align:center; margin-bottom:12px;">
        <img id="winnerProfileImage" src="https://via.placeholder.com/100" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:2px solid #ccc;">
    </div>
    <p><strong>Name:</strong> <span id="winnerProfileName"></span></p>
    <h4 style="margin-top:15px;">Played Games History</h4>
    <div id="winnerGamesList" style="max-height: 200px; overflow-y: auto;">
        No games played yet.
    </div>
  </div>
</div>

<div class="modal-backdrop" id="createRoomModal" style="display:none;">
  <div class="modal">
    <h3>Create Room & Select Party Amount</h3>
    <label>Select your party amount</label>
    <div class="row" id="priceSelectOptions" style="justify-content:space-between; margin-top:10px;">
      <button class="btn price-option" data-price="10">‚Çπ10</button>
      <button class="btn price-option" data-price="50">‚Çπ50</button>
      <button class="btn price-option" data-price="100">‚Çπ100</button>
      <button class="btn price-option" data-price="500">‚Çπ500</button>
    </div>
    <div class="note" style="margin-top:10px;">Prize percentage will be fixed at 90% and only 'Full House' will be the prize.</div>
    <div class="row" style="justify-content:flex-end; margin-top:15px;">
      <button class="btn secondary" id="cancelRoomCreationBtn">Cancel</button>
      <button class="btn" id="confirmRoomCreationBtn" disabled>Create Room</button>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="script.js"></script> </body>
</html>
